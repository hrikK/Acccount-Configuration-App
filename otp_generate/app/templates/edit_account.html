{% extends "base.html" %}

{% block link %}
    <link rel="stylesheet" href="{{url_for('static', filename='edit_acc.css')}}">
{% endblock %}

{% block style %}
    .row {
        margin: 5em auto;
        max-width: 720px;
        background-color: white;
        padding: 3em 5em;
        border-radius: 10%;
    }
{% endblock %}



{% block section %}
    <div class="wrapper">
        <div class="title">
            {{ current_user.username }}<br>
            {% include "includes/cp_modal.html" %}
            <button type="button" class="btn" data-bs-toggle="modal" data-bs-target="#staticBackdrop_" style="color: rgb(0, 149, 246); font-weight: 600;">
                Change Password
            </button>
        </div>
        <form method="POST" class="form">
            <div class="inputfield">
                {% if form.first_name.errors %}
                    {{ form.first_name.label(class="form-label") }}
                    {{ form.first_name(class="form-control is-invalid", value=current_user.first_name) }}
                    <div class="invalid-feedback">
                        {% for error in form.first_name.errors %}
                            <span>{{error}}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ form.first_name.label(class="form-label") }}
                    {{ form.first_name(class="form-control", value=current_user.first_name) }}
                {% endif %}
            </div>  
            <div class="inputfield">
                {% if form.last_name.errors %}
                    {{ form.last_name.label(class="form-label") }}
                    {{ form.last_name(class="form-control is-invalid", value=current_user.last_name) }}
                    <div class="invalid-feedback">
                        {% for error in form.last_name.errors %}
                            <span>{{error}}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ form.last_name.label(class="form-label") }}
                    {{ form.last_name(class="form-control", value=current_user.last_name) }}
                {% endif %}
            </div>  
            <div class="inputfield">
                {% if form.username.errors %}
                    {{ form.username.label(class="form-label") }}
                    {{ form.username(class="form-control is-invalid", value=current_user.username) }}
                    <div class="invalid-feedback">
                        {% for error in form.username.errors %}
                            <span>{{error}}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ form.username.label(class="form-label") }}
                    {{ form.username(class="form-control", value=current_user.username) }}
                {% endif %}
            </div> 
            <div class="inputfield">
                {% if form.email.errors %}
                    {{ form.email.label(class="form-label") }}
                    {{ form.email(class="form-control is-invalid", value=current_user.email) }}
                    <div class="invalid-feedback">
                        {% for error in form.email.errors %}
                            <span>{{error}}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ form.email.label(class="form-label") }}
                    {{ form.email(class="form-control", value=current_user.email) }}
                {% endif %}
            </div> 
            <div class="inputfield">
                <label>Bio</label>
                <textarea name="bio" id="bio" class="textarea" rows="2">
                    {% if current_user.bio != None %}
                        {{ current_user.bio }}
                    {% endif %}
                </textarea>
            </div> 
            <div class="inputfield">
                {{ form.submit(class="btn", value="Submit")}}
            </div>
            <div class="inputfield">
                <label for="date">Last Edited On:</label>
                <input type="datetime" class="form-control" name="date" id="date" disabled value="{{current_user.date.strftime('%d %B, %Y')}}" style="font-style: italic; color: rgb(117, 121, 130);">
            </div>
        </form>
    </div>
{% endblock %}